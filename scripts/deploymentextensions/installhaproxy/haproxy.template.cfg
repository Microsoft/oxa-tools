global
    log 127.0.0.1 local0 notice
    user haproxy
    group haproxy

defaults
    log global
    retries 2
    timeout connect 3000
    timeout server 5000
    timeout client 5000

listen mysql-cluster
    bind {HAProxyIpAddress}:{HAProxyPort}
    mode tcp
    option httpchk
    server mysql1 {MysqlMasterServerIP}:{MysqlServerPort} check port {ProbePort} inter 300s rise 3 fall 3
    server mysql2 {MysqlSlave1ServerIP}:{MysqlServerPort} check port {ProbePort} inter 300s rise 3 fall 3
    server mysql3 {MysqlSlave2ServerIP}:{MysqlServerPort} check port {ProbePort} inter 300s rise 3 fall 3